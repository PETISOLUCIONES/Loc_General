<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!--
        ============================================================================
        Vista: Configuración de Diarios y Usuarios por Defecto
        ============================================================================
        Propósito:
            - Extiende la vista de configuración de contabilidad (res.config.settings)
            - Permite definir valores por defecto a nivel de compañía para:
                * Diarios que se asignarán automáticamente a nuevos usuarios
                * Usuarios que se asignarán automáticamente a nuevos diarios

        Ubicación:
            - Se inserta después del bloque "analytic" en Configuración > Contabilidad

        Funcionalidad:
            - journal_ids: Diarios por defecto para nuevos usuarios
                * Cuando se crea un usuario, estos diarios se asignan automáticamente
                * Definido en res.config.settings y relacionado con company_id.journal_ids

            - sh_user_ids: Usuarios por defecto para nuevos diarios
                * Cuando se crea un diario, estos usuarios se asignan automáticamente
                * Definido en res.config.settings y relacionado con company_id.sh_user_ids

        Uso:
            - Ir a Configuración > Contabilidad
            - Buscar la sección "Diarios y Usuarios por Defecto"
            - Seleccionar diarios/usuarios que se asignarán por defecto

        Impacto:
            - Los valores se guardan a nivel de compañía
            - Se usan en los métodos default_get() de:
                * models/account_journal.py (línea 12-19)
                * models/res_users.py (línea 10-18)
    -->
    <record id="sh_res_config_settings_view_form" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.inherit.account</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="account.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <!-- Inserta nuevo bloque después de la sección analítica -->
            <xpath expr="//block[@id = 'analytic']" position="after">
                <block title="Diarios y Usuarios por Defecto" name="default_journal_and_users">
                    <!-- Diarios por defecto que se asignarán a nuevos usuarios -->
                    <setting>
                        <field name="journal_ids" widget="many2many_tags" />
                    </setting>
                    <!-- Usuarios por defecto que se asignarán a nuevos diarios -->
                    <setting>
                        <field name="sh_user_ids" widget="many2many_tags" />
                    </setting>
                </block>
            </xpath>
        </field>
    </record>
</odoo>