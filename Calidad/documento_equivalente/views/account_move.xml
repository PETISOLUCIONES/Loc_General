<odoo>
    <data>



        <record id="view_account_move_form_docequivalente" model="ir.ui.view">
            <field name="name">account.move.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_post']" position="after">
                    <field name="documento_equivalente" invisible="1"/>
                    <button name="action_post1" type="object" string="Enviar Documento DIAN"
                            invisible="state != 'posted' or invoice_status_dian == 'Exitoso' or move_type not in ['in_invoice', 'in_refund'] or not documento_equivalente or country_code != 'CO'"/>
                </xpath>

                <!--<field name="description_status_dian" position="after">
                    <field name="description_status_dian"
                           attrs="{'invisible':['|', '|',('invoice_status_dian', '!=', 'Fallida'), ('move_type', 'not in', ['out_invoice', 'out_refund', 'in_invoice', 'in_refund']), ('documento_equivalente', '==', False)]}"
                           readonly="True"/>
                </field>
                <field name="ref" position="after">
                    <field name="doc_period"
                           attrs="{'required': [('move_type', 'in', ['in_invoice', 'in_refund']), ('documento_equivalente', '==', True)], 'invisible':[('documento_equivalente', '==', False)]}"/>
                </field>
                <xpath expr="//button[@name='get_pdf_fact']" position="after">
                    <button name="get_pdf_fact"
                            type="object"
                            string="Ver factura"
                            attrs="{'invisible':['|', '|', ('invoice_status_dian','!=','Exitoso'), ('move_type', 'not in', ['out_invoice', 'out_refund', 'in_invoice', 'in_refund']), ('documento_equivalente', '==', False )]}"/>
                </xpath>
                <field name="description_code_debit" position="after">
                    <field name="note_document_equivalent_concept"
                           attrs="{'invisible': ['|',('documento_equivalente', '==', False), ('move_type', '!=', 'in_refund')]}"/>
                </field>
                <field name="url_xml" position="after">
                    <field name="url_xml" widget="url" readonly="True"
                           attrs="{'invisible':['|', '|',('invoice_status_dian', '!=', 'Exitoso'), ('move_type', 'not in', ['out_invoice', 'out_refund',  'in_invoice', 'in_refund']), ('documento_equivalente', '==', False )]}"/>
                </field>
                <field name="payment_method_id" position="replace">
                    <field name="payment_method_id"
                           attrs="{'readonly':[('state','not in',['draft'])], 'invisible':['|',('move_type', 'not in', ['out_invoice', 'out_refund']), ('move_type', 'in', ['in_invoice', 'in_refund']), ('documento_equivalente','=',False)]}"/>
                </field>
                <field name="payment_mean_id" position="replace">
                    <field name="payment_mean_id"
                           attrs="{'readonly':[('state','not in',['draft'])], 'invisible':['|',('move_type', 'not in', ['out_invoice', 'out_refund']), ('move_type', 'in', ['in_invoice', 'in_refund']), ('documento_equivalente','=',False)]}"/>
                </field>-->
            </field>
        </record>

         <!-- Inherit Form View to Modify it -->
        <record id="view_account_move_form_fe_docequivalente" model="ir.ui.view">
            <field name="name">view.account.move.form.fe.docequivalente</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="facturacion_electronica.view_move_account_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_status_dian']" position="after">
                    <field name="invoice_status_dian"
                           readonly="True"
                           widget="badge"
                           decoration-danger="invoice_status_dian == 'Fallida'"
                               decoration-success="invoice_status_dian == 'Exitoso'"
                           invisible="move_type not in ['out_invoice', 'out_refund', 'in_invoice', 'in_refund'] or not documento_equivalente or country_code != 'CO'"/>
                </xpath>
                <field name="description_status_dian" position="after">
                    <field name="description_status_dian"  widget="badge"
                           invisible="invoice_status_dian != 'Fallida' or move_type not in ['out_invoice', 'out_refund', 'in_invoice', 'in_refund'] or not documento_equivalente or country_code != 'CO'"
                           readonly="True"/>
                </field>
                <field name="ref" position="after">
                    <field name="doc_period"
                           required="move_type in ['in_invoice', 'in_refund'] and documento_equivalente" invisible="not documento_equivalente or country_code != 'CO'"/>
                </field>
<!--                <xpath expr="//button[@name='get_pdf_fact']" position="after">-->
<!--                    <button name="get_pdf_fact"-->
<!--                            type="object"-->
<!--                            string="Ver factura"-->
<!--                            invisible="invoice_status_dian != 'Exitoso' or move_type not in ['out_invoice', 'out_refund', 'in_invoice', 'in_refund'] or not documento_equivalente"/>-->
<!--                </xpath>-->
                <field name="description_code_debit" position="after">
                    <field name="note_document_equivalent_concept"
                           invisible="not documento_equivalente or move_type != 'in_refund' or country_code != 'CO'"/>
                </field>
<!--                <field name="url_xml" position="after">-->
<!--                    <field name="url_xml" widget="url" readonly="True"-->
<!--                           invisible="invoice_status_dian != 'Exitoso' or move_type not in ['out_invoice', 'out_refund',  'in_invoice', 'in_refund'] or not documento_equivalente"/>-->
<!--                </field>-->
                <xpath expr="//field[@name='payment_method_id']" position="replace">
                    <field name="payment_method_id" readonly="invoice_status_dian == 'Exitoso'" />
                </xpath>
                <field name="payment_mean_id" position="replace">
                    <field name="payment_mean_id"
                           readonly="state not in ['draft']" invisible="move_type not in ['out_invoice', 'out_refund'] or move_type in ['in_invoice', 'in_refund'] and not documento_equivalente"/>
                </field>

            </field>
        </record>

    </data>
</odoo>